@model IEnumerable<BugTracker.Models.Projects>
@{
    ViewBag.Title = "Dashboard";
}
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-4">
                <div class="card">
                    <div class="header">
                        <h4 class="title">Projects</h4>
                        <p class="category">Click here for a list of all projects</p>
                    </div>
                    <div class="content">
                        <div class="btn btn-block" style="background-color: darkgoldenrod; border-color: darkgoldenrod; color: white; font-size: 30px;">
                            <a style="color: white; font-weight: 100; margin-top: -80px;" href="@Url.Action("Index", "Projects")"><i class="fa fa-tasks pull-left" style="color:white; margin-top: 8px; margin-left: 30px;"></i>Projects</a>
                        </div>
                        @*<div class="footer">
                            <div class="legend">
                                <i class="fa fa-circle text-info"></i> Open
                                <i class="fa fa-circle text-danger"></i> Bounce
                                <i class="fa fa-circle text-warning"></i> Unsubscribe
                            </div>*@
                        <hr>
                        @*<div class="stats">
                                    <i class="fa fa-clock-o"></i> Campaign sent 2 days ago
                                </div>
                            </div>*@
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card">
                    <div class="header">
                        <h4 class="title">Tickets</h4>
                        <p class="category">Click here for a list of all tickets</p>
                    </div>
                    <div class="content">
                        <div class="btn btn-block" style="background-color: darkcyan; border-color: darkcyan; color: white; font-size: 30px;">
                            <a style="color: white; font-weight: 100; margin-top: -80px;" href="@Url.Action("Index", "Tickets")"><i class="fa fa-ticket pull-left" style="color:white; margin-top: 8px; margin-left: 30px;"></i>Tickets</a>
                        </div>
                        @*<div class="footer">
                            <div class="legend">
                                <i class="fa fa-circle text-info"></i> Open
                                <i class="fa fa-circle text-danger"></i> Bounce
                                <i class="fa fa-circle text-warning"></i> Unsubscribe
                            </div>*@
                        <hr>
                        @*<div class="stats">
                                    <i class="fa fa-clock-o"></i> Campaign sent 2 days ago
                                </div>
                            </div>*@
                    </div>
                </div>
            </div>

            @if (User.IsInRole("Admin"))
            {
                <div class="col-md-4">
                    <div class="card">
                        <div class="header">
                            <h4 class="title">Users</h4>
                            <p class="category">Click here for a list of all users</p>
                        </div>
                        <div class="content">
                            <div class="btn btn-block" style="background-color: darkolivegreen; border-color: darkolivegreen; color: white; font-size: 30px;">
                                <a style="color: white; font-weight: 100; margin-top:-80px;" href="@Url.Action("UserIndex", "Admin")"><i class="fa fa-users pull-left" style="color:white; margin-top: 8px; margin-left: 30px;"></i>Users</a>
                            </div>
                            @*<div class="footer">
                                <div class="legend">
                                    <i class="fa fa-circle text-info"></i> Open
                                    <i class="fa fa-circle text-danger"></i> Bounce
                                    <i class="fa fa-circle text-warning"></i> Unsubscribe
                                </div>*@
                            <hr>
                            @*<div class="stats">
                                        <i class="fa fa-clock-o"></i> Campaign sent 2 days ago
                                    </div>
                                </div>*@
                        </div>
                    </div>
                </div>
            }
        </div>
        @*<div class="col-md-8">
                <div class="card">
                    <div class="header">
                        <h4 class="title">Users Behavior</h4>
                        <p class="category">24 Hours performance</p>
                    </div>
                    <div class="content">
                        <div id="chartHours" class="ct-chart"></div>
                        <div class="footer">
                            <div class="legend">
                                <i class="fa fa-circle text-info"></i> Open
                                <i class="fa fa-circle text-danger"></i> Click
                                <i class="fa fa-circle text-warning"></i> Click Second Time
                            </div>
                            <hr>
                            <div class="stats">
                                <i class="fa fa-history"></i> Updated 3 minutes ago
                            </div>
                        </div>
                    </div>
                </div>
            </div>*@
    </div>



    <div class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-8">
                    <div class="card">
                        <div class="header">
                            <h4 class="title">Tickets Overview</h4>
                            <p class="category">Tickets at a glance</p>
                        </div>
                        <div class="content">                           
                            <strong>All Tickets : </strong> @Model.SelectMany(t => t.Ticket).Count() |
                            <strong>Pending Tickets : </strong> @Model.SelectMany(t => t.Ticket).Where(t => t.AssignedToUserId == null).Count() |
                            <strong>Assigned tickets: </strong> @Model.SelectMany(t => t.Ticket).Where(t => t.AssignedToUserId != null).Count() |
                            <strong>Open tickets: </strong> @Model.SelectMany(t => t.Ticket).Where(t => t.TicketStatusId == 1).Count() |
                            <strong>Resolved tickets: </strong> @Model.SelectMany(t => t.Ticket).Where(t => t.TicketStatus.Name == "Resolved").Count() @*|
                            @Model.SelectMany(t=>t.Ticket).Where(t=>t.TicketHistories.Count() !=0).Count() |
                            @Model.SelectMany(t => t.Ticket).Where(t => t.TicketHistories.FirstOrDefault().Property != null).ToString())*@


                            @*<div class="footer">
                                <div class="legend">
                                    <i class="fa fa-circle text-info"></i> Open
                                    <i class="fa fa-circle text-danger"></i> Bounce
                                    <i class="fa fa-circle text-warning"></i> Unsubscribe
                                </div>*@
                            <hr>
                            @*<div class="stats">
                                        <i class="fa fa-clock-o"></i> Campaign sent 2 days ago
                                    </div>
                                </div>*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <div class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-8">
                    <div class="card">
                        <div class="header">
                            <h4 class="title">Projects Overview</h4>
                            <p class="category">Projects at a glance</p>
                        </div>
                        <div class="content">                           
                            <strong>All Projects: </strong> @Model.Count() |
                            <strong>Assigned Projects: </strong> @Model.Where(p => p.Users.Count() != 0).Count() |
                            <strong>Pending Projects: </strong> @Model.Where(p => p.Users.Count() == 0).Count()
                            <hr>
                            @*<div class="stats">
                                        <i class="fa fa-clock-o"></i> Campaign sent 2 days ago
                                    </div>
                                </div>*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>




    @*<div class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-4">
                    <div class="card">
                        <div class="header">
                            <h4 class="title">Recent Notifications</h4>
                            <p class="category"><i class="fa fa-bell fa-fw"></i> Notifications at a glance</p>
                        </div>
                        <div class="content">
                            <div class="panel-body">
                                <div class="list-group">
                                    @foreach (var item in Model.Select(i => i.Ticket))
                                    {
                                        <a href="#" class="list-group-item">
                                            <i class="fa fa-envelope fa-fw"></i> Ticket Change
                                            <span class="pull-right text-muted small">
                                                <em>@item.SelectMany(i=>i.TicketHistories).Where(i=>i.Property !=null).Count()</em></span>
                                        </a>
                                    }
                                </div>
                            </div>

                            <hr>


                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>*@

   












    @*<div class="row">
        <div class="col-md-6">
            <div class="card ">
                <div class="header">
                    <h4 class="title">2014 Sales</h4>
                    <p class="category">All products including Taxes</p>
                </div>
                <div class="content">
                   
                    <div class="footer">
                        <div class="legend">
                            <i class="fa fa-circle text-info"></i> Tesla Model S
                            <i class="fa fa-circle text-danger"></i> BMW 5 Series
                        </div>
                        <hr>
                        <div class="stats">
                            <i class="fa fa-check"></i> Data information certified
                        </div>
                    </div>
                </div>
            </div>
        </div>

        @*<div class="col-md-6">
                <div class="card ">
                    <div class="header">
                        <h4 class="title">Tasks</h4>
                        <p class="category">Backend development</p>
                    </div>
                    <div class="content">
                        <div class="table-full-width">
                            <table class="table">
                                <tbody>
                                    <tr>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" data-toggle="checkbox">
                                            </label>
                                        </td>
                                        <td>Sign contract for "What are conference organizers afraid of?"</td>
                                        <td class="td-actions text-right">
                                            <button type="button" rel="tooltip" title="Edit Task" class="btn btn-info btn-simple btn-xs">
                                                <i class="fa fa-edit"></i>
                                            </button>
                                            <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
                                                <i class="fa fa-times"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" data-toggle="checkbox" checked="">
                                            </label>
                                        </td>
                                        <td>Lines From Great Russian Literature? Or E-mails From My Boss?</td>
                                        <td class="td-actions text-right">
                                            <button type="button" rel="tooltip" title="Edit Task" class="btn btn-info btn-simple btn-xs">
                                                <i class="fa fa-edit"></i>
                                            </button>
                                            <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
                                                <i class="fa fa-times"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" data-toggle="checkbox" checked="">
                                            </label>
                                        </td>
                                        <td>
                                            Flooded: One year later, assessing what was lost and what was found when a ravaging rain swept through metro Detroit
                                        </td>
                                        <td class="td-actions text-right">
                                            <button type="button" rel="tooltip" title="Edit Task" class="btn btn-info btn-simple btn-xs">
                                                <i class="fa fa-edit"></i>
                                            </button>
                                            <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
                                                <i class="fa fa-times"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" data-toggle="checkbox">
                                            </label>
                                        </td>
                                        <td>Create 4 Invisible User Experiences you Never Knew About</td>
                                        <td class="td-actions text-right">
                                            <button type="button" rel="tooltip" title="Edit Task" class="btn btn-info btn-simple btn-xs">
                                                <i class="fa fa-edit"></i>
                                            </button>
                                            <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
                                                <i class="fa fa-times"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" data-toggle="checkbox">
                                            </label>
                                        </td>
                                        <td>Read "Following makes Medium better"</td>
                                        <td class="td-actions text-right">
                                            <button type="button" rel="tooltip" title="Edit Task" class="btn btn-info btn-simple btn-xs">
                                                <i class="fa fa-edit"></i>
                                            </button>
                                            <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
                                                <i class="fa fa-times"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" data-toggle="checkbox">
                                            </label>
                                        </td>
                                        <td>Unfollow 5 enemies from twitter</td>
                                        <td class="td-actions text-right">
                                            <button type="button" rel="tooltip" title="Edit Task" class="btn btn-info btn-simple btn-xs">
                                                <i class="fa fa-edit"></i>
                                            </button>
                                            <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
                                                <i class="fa fa-times"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="footer">
                            <hr>
                            <div class="stats">
                                <i class="fa fa-history"></i> Updated 3 minutes ago
                            </div>
                        </div>
                    </div>
                </div>
            </div>*@
    </div>

@*@section Scripts{
    <script type="text/javascript">
            $(document).ready(function(){
                demo.initChartist();
            });
    </script>
    }*@
